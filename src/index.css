@tailwind base;
@tailwind components;
@tailwind utilities;
@font-face {
    font-family: 'Sarasa Gothic';
    src: url('./assets/fonts/SarasaFixedSC-Regular.ttf') format('truetype');
    font-weight: normal;
    font-style: normal;
    font-display: swap;
}

@layer base {
    /* 铺满全屏 */
    #root {
        width: 100%;
        min-height: 100vh;
    }

    /* 基础重置 */
    *, *::before, *::after {
        box-sizing: border-box;
    }

    body {
        @apply font-sans;
        margin: 0;
        min-height: max(884px, 100dvh);
        background-color: #0f0508; /* Cyberpunk 深色底 */
        color: #ffffff;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
    }

    /* 数据展示时强制使用等宽 */
    .data-text {
        @apply font-mono;
        letter-spacing: -0.1em;
    }

    img, svg, video, canvas {
        display: block;
        max-width: 100%;
    }

    /* 全局选中色：品红 */
    ::selection {
        background: #ff0055;
        color: #ffffff;
    }
}

@layer components {
    /* 霓虹发光文字 (用于标题/强调) */
    .text-glow {
        text-shadow: 0 0 10px rgba(255, 0, 85, 0.5);
    }

    /* 玻璃拟态容器 */
    .glass-card {
        background: rgba(255, 255, 255, 0.03);
        backdrop-filter: blur(10px);
        -webkit-backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.1);
    }

    /* 扫描线遮罩 (背景纹理) */
    .scanline-overlay {
        pointer-events: none;
        background: linear-gradient(
                to bottom,
                transparent 50%,
                rgba(0, 0, 0, 0.2) 50%
        );
        background-size: 100% 4px;
    }

    /* 故障文字：注意！必须在 JSX 中添加 data-text="内容" 属性才能生效 */
    .glitch-text {
        position: relative;
    }

    .glitch-text::before,
    .glitch-text::after {
        content: attr(data-text);
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
    }

    .glitch-text::before {
        left: 2px;
        text-shadow: -1px 0 #f05;
        clip: rect(24px, 550px, 90px, 0);
        animation: glitch-anim-2 3s infinite linear alternate-reverse;
    }

    .glitch-text::after {
        left: -2px;
        text-shadow: -1px 0 #0ff;
        clip: rect(85px, 550px, 140px, 0);
        animation: glitch-anim 2.5s infinite linear alternate-reverse;
    }

    /* 噪点印章边框 (装饰性容器) */
    .stamp-box {
        border: 4px solid #f05;
        mask-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='100%25' height='100%25'><filter id='noise'><feTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='3' stitchTiles='stitch' result='noise'/><feColorMatrix type='matrix' values='1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 0.5 0' in='noise' result='coloredNoise'/></filter><rect width='100%25' height='100%25' fill='white'/><rect width='100%25' height='100%25' fill='black' filter='url(%23noise)'/></svg>");
        -webkit-mask-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='100%25' height='100%25'><filter id='noise'><feTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='3' stitchTiles='stitch' result='noise'/><feColorMatrix type='matrix' values='1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 0.5 0' in='noise' result='coloredNoise'/></filter><rect width='100%25' height='100%25' fill='white'/><rect width='100%25' height='100%25' fill='black' filter='url(%23noise)'/></svg>");
    }

    /* Layout: 页面与容器 */
    .layout-page {
        @apply relative min-h-screen w-full max-w-md mx-auto flex flex-col;
    }

    .layout-frame {
        @apply bg-background-dark shadow-2xl overflow-hidden;
    }

    .layout-frame-light {
        @apply bg-background-light dark:bg-background-dark;
    }

    /* Header / TopBar */
    .header-bar {
        @apply flex items-center justify-between border-b border-white/10 bg-black/80 backdrop-blur-sm;
    }

    .header-bar-muted {
        @apply border-white/5 bg-background-dark/80 backdrop-blur-md;
    }

    .header-title {
        @apply text-white font-display tracking-tight;
    }

    .header-subtitle {
        @apply text-[10px] text-text-dim font-mono tracking-widest uppercase;
    }

    /* Card system */
    .card-base {
        @apply rounded-lg border border-white/10 overflow-hidden relative;
    }

    .card-glass {
        @apply glass-card;
    }

    .card-dark {
        @apply bg-black/40 border border-white/10;
    }

    .card-interactive {
        @apply transition-all duration-300 hover:scale-[1.02] active:scale-95;
    }

    /* Badge / Label */
    .badge {
        @apply text-[8px] uppercase font-mono tracking-widest rounded border px-1.5 py-0.5;
    }

    .badge-muted {
        @apply bg-white/5 border-white/10 text-text-dim;
    }

    .badge-primary {
        @apply bg-primary/20 border-primary/30 text-primary;
    }

    .badge-warning {
        @apply bg-yellow-500/15 border-yellow-500/30 text-yellow-500;
    }

    /* Progress */
    .progress-track {
        @apply w-full bg-white/10 rounded-full overflow-hidden;
    }

    .progress-track-sm {
        @apply h-1;
    }

    .progress-track-md {
        @apply h-1.5;
    }

    .progress-bar {
        @apply h-full bg-primary;
    }

    .progress-bar-warning {
        @apply bg-yellow-500;
    }

    .progress-bar-glow {
        @apply shadow-[0_0_10px_#ff0055];
    }

    /* Button system */
    .btn-base {
        @apply inline-flex items-center justify-center gap-2 text-xs font-bold tracking-widest transition-all duration-200;
    }

    .btn-primary {
        @apply bg-primary/20 border border-primary/50 text-primary hover:bg-primary hover:text-white rounded-xl;
    }

    .btn-secondary {
        @apply bg-white/5 border border-white/10 text-white hover:bg-white/10 rounded-xl;
    }

    .btn-ghost {
        @apply bg-transparent border border-white/10 text-white/80 hover:text-white;
    }
}

@layer utilities {
    /* 卡片悬停发光效果 (用于图鉴卡片)(移动端没用) */
    .card-hover-glow {
        @apply transition-all duration-300 hover:border-primary/50 hover:shadow-lg hover:ring-1 hover:ring-primary/30;
    }

    /* 全息扫描光效 */
    .holo-scan {
        position: relative;
        overflow: hidden;
    }

    .holo-scan::after {
        content: '';
        position: absolute;
        top: 0;
        left: -150%;
        width: 50%;
        height: 100%;
        background: linear-gradient(to right, transparent, rgba(255, 255, 255, 0.4), transparent);
        transform: skewX(-25deg);
        animation: holo-sweep 4s infinite;
    }

    /* 模糊加密 (用于未解锁态的各类组件) */
    .blur-cipher {
        filter: blur(3px) grayscale(100%);
        opacity: 0.5;
        transition: all 0.3s;
    }

    .blur-cipher:hover {
        filter: blur(0px);
        opacity: 1;
    }

    /* 柱状图生长 (用于个人详情页) */
    .bar-grow {
        animation: grow-up 1s cubic-bezier(0.4, 0, 0.2, 1) forwards;
        transform-origin: bottom;
        transform: scaleY(0);
    }

    /* 背景模糊效果 (通用) */
    .backdrop-neural-focus {
        backdrop-filter: blur(8px) grayscale(90%) contrast(1.2);
        -webkit-backdrop-filter: blur(8px) grayscale(90%) contrast(1.2);
        background: rgba(15, 5, 8, 0.6);
    }

    /* Modal 进入动画 (通用) */
    @keyframes modal-scan-in {
        0% {
            opacity: 0;
            transform: scale(0.95) translateY(20px);
            clip-path: inset(0 0 100% 0);
        }
        100% {
            opacity: 1;
            transform: scale(1) translateY(0);
            clip-path: inset(0 0 0 0);
        }
    }
    .animate-modal-entry {
        animation: modal-scan-in 0.4s cubic-bezier(0.23, 1, 0.32, 1) forwards;
    }

    /* 网格背景 */
    .bg-grid-pattern {
        background-image: linear-gradient(rgba(255, 255, 255, 0.05) 1px, transparent 1px),
        linear-gradient(90deg, rgba(255, 255, 255, 0.05) 1px, transparent 1px);
        background-size: 20px 20px;
    }

    /* Effects */
    .effect-noise {
        @apply pointer-events-none z-0 mix-blend-overlay bg-noise;
    }

    .effect-scanlines {
        @apply pointer-events-none z-0 bg-scanlines opacity-10;
    }

    .effect-glow {
        @apply pointer-events-none z-0 bg-primary/20 rounded-full blur-[100px];
    }

    .effect-vignette {
        @apply pointer-events-none z-30;
        background-image: radial-gradient(circle at center, transparent 0%, rgba(0, 0, 0, 0.4) 100%);
    }

    .effect-grid {
        @apply pointer-events-none z-0 opacity-[0.03] bg-grid-pattern;
    }

    /* Effects Utilities (统一复用) */
    .effect-scanlines-soft {
        @apply pointer-events-none bg-scanlines opacity-10;
    }

    .effect-noise-soft {
        @apply pointer-events-none bg-noise opacity-30 mix-blend-overlay;
    }

    .effect-grid-soft {
        @apply pointer-events-none bg-grid-pattern opacity-20;
    }
}

@keyframes holo-sweep {
    0%, 20% {
        left: -150%;
    }
    100% {
        left: 250%;
    }
}

@keyframes grow-up {
    to {
        transform: scaleY(1);
    }
}

@keyframes glitch-anim {
    0% {
        clip: rect(14px, 9999px, 122px, 0);
    }
    5% {
        clip: rect(78px, 9999px, 86px, 0);
    }
    100% {
        clip: rect(35px, 9999px, 148px, 0);
    }
}

@keyframes glitch-anim-2 {
    0% {
        clip: rect(107px, 9999px, 15px, 0);
    }
    5% {
        clip: rect(4px, 9999px, 78px, 0);
    }
    100% {
        clip: rect(138px, 9999px, 66px, 0);
    }
}

/* 自定义滚动条 (Webkit) */
::-webkit-scrollbar {
    width: 4px;
    height: 4px;
}

::-webkit-scrollbar-track {
    background: #230f16;
}

::-webkit-scrollbar-thumb {
    background: #ff0055;
    border-radius: 2px;
}

::-webkit-scrollbar-thumb:hover {
    background: #cc0044;
}